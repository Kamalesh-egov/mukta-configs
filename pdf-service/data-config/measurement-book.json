{
  "key": "measurement-book",
  "documentType": "WORK-ORDER",
  "DataConfigs": {
    "moduleName": "rainmaker-common",
    "version": "1.0.0",
    "baseKeyPath": "$",
    "entityIdPath": "$.id",
    "isCommonTableBorderRequired": true,
    "mappings": [
      {
        "topic": "common-pdf-generation-3",
        "mappings": [
          {
            "direct": [
              {
                "variable": "project_id",
                "value": {
                  "path": "$.contract.contractNumber"
                }
              },
              {
                "variable": "work_order_number",
                "value": {
                  "path": "$.measurement.measurementNumber"
                }
              },
              {
                "variable": "project_name",
                "value": {
                  "path": "$.estimate.additionalDetails.projectName"
                }
              },
              {
                "variable": "project_description",
                "value": {
                  "path": "$.estimate.estimateDetails.*.description"
                }
              },
              {
                "variable": "tableData",
                "value": {
                  "path": "$.tableData"
                },
                "type":"function",
                "format": "var y=[],a=[],tableData=arguments[0];function rupeeFormat(amount){flag=0;var count=0;var amount=amount.toString(); var len=amount.length;var val=''; for(var i=len-1;i>=0;i--){ val=amount[i]+val;if(amount[i]=='.'){flag=1;count=-1;val=amount.substring(i,len)};if(count%2==0 && i!=0 && count!=0){val=','+val;};count+=1;};if(flag==0){val+='.00'};return val}; for(var i=0;i<tableData.length;i++){ if(tableData[i].uom!=1){var x={ Sno:i+1,uom:tableData[i].uom,rate:rupeeFormat(tableData[i].unitRate),Estimated_Quantity:tableData[i].approvedQuantity,Consumed_Quantity:tableData[i].consumedQ,Current_Quantity:tableData[i].approvedQuantity,description:tableData[i].description,mb_amount:tableData[i].amount};y.push(x);}}return y;"
              }
            ]
          },
          {
            "externalAPI": [
              {
                "path": "http://localhost:8082/egov-mdms-service/v1/_get",
                "queryParam": "moduleName=tenant&masterName=tenants&tenantId=od&filter=%5B?(@.code=='{$.tenantId}')%5D",
                "apiRequest": null,
                "responseMapping": [
                  {
                    "variable": "address",
                    "value": "$.MdmsRes.tenant.tenants[0].address"
                  },
                  {
                    "variable": "phoneNumber",
                    "value": "$.MdmsRes.tenant.tenants[0].contactNumber"
                  },
                  {
                    "variable": "website",
                    "value": "$.MdmsRes.tenant.tenants[0].domainUrl"
                  },
                  {
                    "variable": "email",
                    "value": "$.MdmsRes.tenant.tenants[0].emailId"
                  },
                  {
                    "variable": "logoImage",
                    "value": "$.MdmsRes.tenant.tenants[0].logoId",
                    "type": "image"
                  },
                  {
                    "variable": "logo-header",
                    "value": "$.MdmsRes.tenant.tenants[0].code",
                    "localisation": {
                      "required": true,
                      "module": "rainmaker-common"
                    }
                  },
                  {
                    "variable": "subdivision",
                    "value": "$.MdmsRes.tenant.tenants[0].city.ulbGrade",
                    "localisation": {
                      "required": true,
                      "prefix": "COMMON_SUBDIVISION",
                      "module": "rainmaker-common"
                    }
                  },
                  {
                    "variable": "cmImage",
                    "value": "$.MdmsRes.tenant.tenants[0].cmImageId",
                    "type": "image"
                  },
                  {
                    "variable": "tLogoImage",
                    "value": "$.MdmsRes.tenant.tenants[0].tLogoImageId",
                    "type": "image"
                  },
                  {
                    "variable": "schemImage",
                    "value": "$.MdmsRes.tenant.tenants[0].schemImageId",
                    "type": "image"
                  },
                  {
                    "variable": "sealImage",
                    "value": "$.MdmsRes.tenant.tenants[0].sealImageId",
                    "type": "image"
                  },
                  {
                    "variable": "districtName",
                    "value": "$.MdmsRes.tenant.tenants[0].city.districtName"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
}